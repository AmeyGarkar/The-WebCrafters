<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= product.title %> - Wearify</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">

  <!-- NAVBAR -->
  <%- include('partials/header') %>

  <!-- PRODUCT DETAIL PAGE -->
  <main class="flex-grow px-4 py-10">
    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-10">

      <!-- Product Images -->
     <% if (product.images && product.images.length > 0) { %>
  <div id="product-images">
  <img id="mainImage" src="/images/<%= product.images[0] %>" alt="<%= product.name %>" class="rounded-xl w-full object-cover h-96 mb-4">

  <div class="flex gap-2">
    <% product.images.forEach((img, i) => { %>
      <img 
        src="/images/<%= img %>" 
        class="w-20 h-20 object-cover rounded cursor-pointer thumbnail <% if (i === 0) { %> border-2 border-cyan-500 <% } %>"
        onclick="showImage('/images/<%= img %>', this)"
      >
    <% }); %>
  </div>
</div>

<script>
  function showImage(src, el) {
    document.getElementById('mainImage').src = src;
    // Remove border from all thumbnails
    document.querySelectorAll('.thumbnail').forEach(img => img.classList.remove('border-cyan-500', 'border-2'));
    // Add border to clicked thumbnail
    el.classList.add('border-cyan-500', 'border-2');
  }
</script>
<% } else { %>
  <p>No images available</p>
<% } %>

      <!-- <div>
        <img src="/images/<%= product.images[0] %>" alt="<%= product.title %>" class="rounded-xl w-full object-cover h-96 mb-4">
        <div class="flex gap-2">
          <% product.images.forEach((img, i) => { %>
            <img src="/images/<%= img %>" class="w-20 h-20 object-cover rounded cursor-pointer <% if (i === 0) { %> border-2 border-cyan-500 <% } %>">
          <% }) %>
        </div>
      </div> -->

      <!-- Product Info -->
      <div class="space-y-6">
        <h1 class="text-3xl font-bold"><%= product.title %></h1>
        <div class="flex items-center gap-2">
          <span class="text-yellow-500 text-xl">★★★★★</span>
          <span class="text-sm text-gray-500">4.9 (421 ratings)</span>
        </div>
        <p class="text-lg text-gray-600"><%= product.description %></p>

        <div class="space-y-1">
          <div class="text-gray-700 text-lg">MRP: <span class="line-through text-gray-400">₹<%= product.mrp %></span></div>
          <div class="text-2xl font-bold text-black">₹<%= product.price %>
            <span class="text-green-600 text-sm font-medium">(<%= product.discount %>% OFF)</span>
          </div>
          <div class="text-sm text-gray-600">Stock left: <span class="font-semibold text-black"><%= product.stock %> units</span></div>
        </div>

        <div class="flex items-center gap-4">
          <label for="quantity" class="font-semibold">Quantity:</label>
          <input id="quantity" name="quantity" type="number" value="1" min="1" class="w-16 px-2 py-1 border rounded">
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
          <button class="bg-black text-white px-6 py-2 rounded font-semibold hover:bg-gray-800">Add to Cart</button>
          <button class="bg-cyan-600 text-white px-6 py-2 rounded font-semibold hover:bg-cyan-700">Buy Now</button>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">Highlights</h3>
          <ul class="list-disc pl-6 text-gray-600 space-y-1">
          <% if (product.features && product.features.length > 0) { %>
  <h3 class="font-semibold text-lg mb-2">Highlights</h3>
  <ul class="list-disc pl-6 text-gray-600 space-y-1">
    <% product.features.forEach(f => { %>
      <li><%= f %></li>
    <% }) %>
  </ul>
<% } else { %>
  <p class="text-sm text-gray-400 italic">No highlights available</p>
<% } %>

          </ul>
        </div>
      </div>
    </div>

    <!-- Extended Info Section -->
    <div class="max-w-4xl mx-auto mt-16">
      <h2 class="text-2xl font-bold mb-4">Product Details</h2>
      <p class="text-gray-700 mb-4"><%= product.details %></p>
      <h3 class="text-xl font-semibold mb-2">What's in the box?</h3>
      <ul class="list-disc pl-6 text-gray-600 space-y-1">
       <% if (product.inBox && product.inBox.length > 0) { %>
  <h3 class="text-xl font-semibold mb-2">What's in the box?</h3>
  <ul class="list-disc pl-6 text-gray-600 space-y-1">
    <% product.inBox.forEach(item => { %>
      <li><%= item %></li>
    <% }) %>
  </ul>
<% } else { %>
  <p class="text-gray-400 italic">Box contents not available</p>
<% } %>

      </ul>
    </div>
  </main>

  <!-- FOOTER -->
  <%- include('partials/footer') %>
</body>
</html>
